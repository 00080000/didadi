<view class="container">
  <!-- 加载中状态 -->
  <view wx:if="{{isLoading}}" class="loading">
    <view class="loading-icon"></view>
    <view class="loading-text">加载中...</view>
  </view>

  <!-- 错误提示 -->
  <view wx:if="{{errorMsg}}" class="error-area">
    <view class="error-text">{{errorMsg}}</view>
    <button class="error-btn" bindtap="closeError">关闭</button>
  </view>

  <!-- 调试信息（开发时使用） -->
  <view class="debug" wx:if="{{false}}">
    <view>列配置数量: {{tableColumns.length}}</view>
    <view>数据行数量: {{tableData.length}}</view>
    <view wx:if="{{tableData.length > 0}}">第一行数据: {{tableData[0]}}</view>
  </view>

  <!-- 内容区域 -->
  <view wx:if="{{!isLoading && !errorMsg}}">
  <!-- 顶部信息区域 -->
    <view class="topArea">
    <header></header>
    <view class="information">
      询价单{{quote.quoteNo || ''}}
    </view>
    <view class="operation">
      <view>
        <button size="mini" bind:tap="goToDownloadQuotation">下载文档</button>
        <button size="mini" bind:tap="goToDownloadAttachment" >查看附件</button>
      </view>
      <view bind:tap="printQuotation">
        <image src="/static/print.png" mode="widthFix"></image>
      </view>
    </view>
  </view>
    
    

    <!-- 询价单内容区域 -->
    
    <view class="contentArea">
      <!-- 头部文本 -->
      <view class="headText" wx:if="{{quote.headText}}">
        <rich-text nodes="{{quote.headText}}"></rich-text>
      </view>
      
      <!-- 商品表格 -->
      <view class="tableScroll">
        <view class="tableContainer">
          <!-- 表头 -->
          <view class="tableRow headerRow" style="display: flex;">
            <view 
              class="tableCell" 
              wx:for="{{tableColumns}}" 
              wx:key="index"
              style="min-width: {{item.width || '120rpx'}}; width: {{item.width || '120rpx'}}; text-align: {{item.align || 'center'}}; background: {{item.background || '#ececec'}}; padding: 8px; box-sizing: border-box; border: 1px solid #eee; font-weight: bold;"
            >
              {{item.label}}
            </view>
          </view>

          <!-- 表格数据 -->
          <view class="table-body">
            <!-- 无数据提示 -->
            <view wx:if="{{tableData.length === 0}}" class="no-data">
              暂无商品数据
            </view>
            
            <!-- 数据行 -->
            <view 
              class="tableRow data-row" 
              wx:for="{{tableData}}" 
              wx:for-item="row" 
              wx:key="index"
              style="display: flex; border-bottom: 1px solid #eee;"
            >
              <view 
                class="tableCell" 
                wx:for="{{tableColumns}}" 
                wx:for-item="col" 
                wx:for-index="colIdx"
                wx:key="colIdx"
                style="min-width: {{col.width || '120rpx'}}; width: {{col.width || '120rpx'}}; text-align: {{col.align || 'center'}}; background: {{col.background || '#fff'}}; padding: 8px; box-sizing: border-box; border: 1px solid #eee; border-top: none; {{colIdx > 0 ? 'border-left: none;' : ''}}"
              >
                <!-- 直接绑定字段，确保与数据结构匹配 -->
                {{row[col.code]}}
              </view>
            </view>
          </view>
        </view>
      </view>
      
      <!-- 底部文本 -->
      <view class="footText" wx:if="{{quote.footText}}" style="margin-top: 20px; padding: 10px;">
        <rich-text nodes="{{quote.footText}}"></rich-text>
      </view>
    </view>
  </view>
</view>
    