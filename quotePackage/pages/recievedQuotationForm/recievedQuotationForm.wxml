<view class="container">
  <!-- 上方的Logo与文字提示部分 -->
  <view class="topArea">
    <view>
      <view class='header' wx:if="{{!ifShowSearch}}">
        <view style="display: flex;align-items: flex-end;">
          <image src="/static/logo.png" class="logo"></image>
          <text class="address">https://app.didadi.vip</text>
        </view>
        <view class="searchIcon" bind:tap="showSearch">
          <image src='/static/search.png'></image>
        </view>
      </view>
      <view class="searchArea" wx:if="{{ifShowSearch}}">
        <form catchsubmit="inputQuotation" style="width: 100%;height: 100%">
          <view style="display: flex;align-items: center;width: 100%;height: 100%;justify-content: space-around;">
            <view class="inputArea">
              <input style="width: 490rpx;" model:value="{{keyword}}" bindconfirm="inputQuotation" placeholder="搜索报价单名称、编号或供应商"/>
              <image src="/static/cancel.png" bind:tap="showSearch"></image>
            </view>
            <view style="display: flex;align-items: center;">
              <button formType="submit" size="mini" style="font-size: 32rpx;">搜索</button>
            </view>
          </view>
        </form>
      </view>
      <view class="options">
        <view class="chooseOption">
          报价单库
        </view>
        <view class="divide"></view>
        <view class="notDisabledButton" bind:tap="goToInquiry">
          询价单库
        </view>
      </view>
    </view>
    <view class="quotationOption">
      <view class="sendedQuotation" bind:tap="goToSendedQuotation">
        发出的报价单
      </view>
      <view class="recievedQuotation">
        收到的报价单
      </view>
    </view>
  </view>

  <!-- 加载中提示 -->
  <view wx:if="{{isLoading}}" class="loading-view">
    <loading>加载中...</loading>
  </view>

  <!-- 错误提示 -->
  <view wx:if="{{errorMsg && !isLoading}}" class="error-view">
    <text>{{errorMsg}}</text>
  </view>

  <view class="cardList" wx:if="{{!isLoading}}">
    <view class="card" wx:for="{{filterQuotation}}" wx:key="id" wx:item="item">
        <view class="cardLeft">
        <view style="font-size: 22rpx;margin-top: 20rpx;">报价时间</view>
        <view style="font-size: 20rpx;">{{item.createTime}}</view>
        <view style="font-size: 20rpx;margin-bottom: 20rpx;">{{item.time}}</view>
      </view>
      <view class="cardRight">
        <view class="title">
          <view style="font-weight: bolder;font-size: 28rpx;margin-left: 15rpx;">{{item.quoteName}} </view>
          <view style="font-size: 23rpx; color: {{ item.type == 1 ? 'blue' : item.type == 0 ? 'red' : 'gray' }};">{{ item.type == 1 ? '有效' :  '已过期' }}
</view>
        </view>
        <view class='quotationNumber'>
          {{item.name}}
          <view style="font-size: 20rpx; margin-top: 5rpx;">供应商: {{item.outEnterpriseName || '未知'}}  联系人: {{item.outUname || '未知'}}</view>
        </view>
        <view class="operation">
          <button 
            class="notDisabledButton" 
            size="mini" 
            bind:tap="goToViewRecievedQuotation" 
            data-id="{{item.quoteId}}"
          >
            预览
          </button>
          <button 
            class="disabledButton" 
            size="mini" 
            bind:tap="edit" 
            data-id="{{item.quoteId}}"
            disabled
          >
            编辑
          </button>
          <button 
            class="disabledButton" 
            size="mini" 
            bind:tap="copy" 
            data-id="{{item.quoteId}}"
            disabled
          >
            复制
          </button>
          <button 
            class="notDisabledButton" 
            size="mini" 
            bind:tap="share" 
            data-id="{{item.quoteId}}"
          >
            分享
          </button>
          <image 
            src="/static/delete.png" 
            bind:tap="confirmDelete" 
            data-id="{{item.id}}"
            class="delete-icon"
          ></image>
        </view>
      </view>
    </view>

    <!-- 空状态提示 -->
    <view wx:if="{{filterQuotation.length === 0 && !errorMsg}}" class="empty-view">
      <text>暂无收到的报价单</text>
    </view>
  </view>

  <view class="tabBar">
    <view class="notSelectedNavigateBar" bind:tap="navigateToMain">
      <image mode="heightFix" src="/static/home-gray.png"></image>
      首页
    </view>
    <view class="selectedNavigateBar">
      <image mode="heightFix" src="/static/price-blue.png"></image>
      询报价
    </view>
    <view class="notSelectedNavigateBar" bind:tap="navigateToProduct">
      <image mode="heightFix" src="/static/product-gray.png"></image>
      商品
    </view>
    <view class="notSelectedNavigateBar" bind:tap="navigateToMerchant">
      <image mode="heightFix" src="/static/merchant-gray.png"></image>
      商家
    </view>
  </view>
</view>
    